import{c9 as xe,r as h,ca as he,bY as Ie,j as e,B as W,e as u,f as A,b_ as Fe,O as se,x as r,a as Ae,ch as Dt,bf as Lt,I as Pt,ci as It,cj as Ft,F as B,L as Ue,T as g,g as Y,S as p,E as Ge,q as oe,N as At,aa as ue,R as _,p as D,d as Z,aB as Ye,aC as Je,s as J,ah as fe,ak as S,am as Qe,h as Re,an as ce,aS as Ut,aT as Rt,ao as de,aD as Et,ap as Xe,cn as $t,cg as Se,k as Ot,l as Te,C as M,a9 as zt,a6 as Mt,bZ as Vt,D as Ee,ck as Bt,cb as Wt,c as et,G as F,cf as qe,y as Nt,bI as Gt,cV as qt}from"./index-fc31389b.js";import{A as _t}from"./Autocomplete-79c5288c.js";import{T as tt}from"./TextField-c5c5e45f.js";import{c as V}from"./format-number-8ee044d8.js";import{I as ke}from"./image-9d9e55ff.js";import{T as De}from"./text-max-line-a968abe6.js";import{P as st,p as Ht}from"./Pagination-6c92d77f.js";import{C as ot}from"./custom-breadcrumbs-55e72b55.js";import{c as it,a as z,v as Kt,f as _e,u as nt,F as rt,R as te,o as Zt,p as Yt,l as He}from"./rhf-autocomplete-947a9911.js";import{o as at}from"./yup-674d2aca.js";import{M as $e}from"./markdown-5ca73b49.js";import{E as Oe}from"./empty-content-f8c8f2e9.js";import{D as Jt}from"./DialogActions-cfb1f284.js";import{L as je}from"./LoadingButton-1fae9005.js";import{F as pe}from"./FormControlLabel-f8d84e00.js";import{S as Ke}from"./Switch-eb36a74c.js";import{C as Ze}from"./CardHeader-a7b93930.js";import{C as me}from"./Chip-276a27ce.js";import{C as lt}from"./Checkbox-1984f828.js";import{A as ct}from"./AvatarGroup-fdb08457.js";import{u as ge}from"./index-e694d148.js";import{C as Qt}from"./CardContent-defbae49.js";import{S as C}from"./Skeleton-b99a7c57.js";import{L as Xt}from"./ListItem-c8d87749.js";import{F as dt}from"./Fab-38e4925e.js";import{Z as es}from"./Zoom-7ab2086e.js";const ts=[{value:"published",label:"Published"},{value:"draft",label:"Draft"}],oo=[{value:"latest",label:"Latest"},{value:"popular",label:"Popular"},{value:"oldest",label:"Oldest"}];function io(){const t=he.post.list,{data:s,isLoading:o,error:i,isValidating:n}=ge(t,xe);return h.useMemo(()=>({posts:(s==null?void 0:s.posts)||[],postsLoading:o,postsError:i,postsValidating:n,postsEmpty:!o&&!(s!=null&&s.posts.length)}),[s==null?void 0:s.posts,i,o,n])}function ze(t){const s=t?[he.post.details,{params:{title:t}}]:"",{data:o,isLoading:i,error:n,isValidating:a}=ge(s,xe);return h.useMemo(()=>({post:o==null?void 0:o.post,postLoading:i,postError:n,postValidating:a}),[o==null?void 0:o.post,n,i,a])}function ss(t){const s=t?[he.post.latest,{params:{title:t}}]:"",{data:o,isLoading:i,error:n,isValidating:a}=ge(s,xe);return h.useMemo(()=>({latestPosts:(o==null?void 0:o.latestPosts)||[],latestPostsLoading:i,latestPostsError:n,latestPostsValidating:a,latestPostsEmpty:!i&&!(o!=null&&o.latestPosts.length)}),[o==null?void 0:o.latestPosts,n,i,a])}function no(t){const s=t?[he.post.search,{params:{query:t}}]:"",{data:o,isLoading:i,error:n,isValidating:a}=ge(s,xe,{keepPreviousData:!0});return h.useMemo(()=>({searchResults:(o==null?void 0:o.results)||[],searchLoading:i,searchError:n,searchValidating:a,searchEmpty:!i&&!(o!=null&&o.results.length)}),[o==null?void 0:o.results,n,i,a])}function os({sort:t,sortOptions:s,onSort:o}){const i=Ie();return e.jsxs(e.Fragment,{children:[e.jsxs(W,{disableRipple:!0,color:"inherit",onClick:i.onOpen,endIcon:e.jsx(u,{icon:i.open?"eva:arrow-ios-upward-fill":"eva:arrow-ios-downward-fill"}),sx:{fontWeight:"fontWeightSemiBold",textTransform:"capitalize"},children:["Sort By:",e.jsx(A,{component:"span",sx:{ml:.5,fontWeight:"fontWeightBold"},children:t})]}),e.jsx(Fe,{open:i.open,onClose:i.onClose,sx:{width:140},children:s.map(n=>e.jsx(se,{selected:t===n.value,onClick:()=>{i.onClose(),o(n.value)},children:n.label},n.value))})]})}os.propTypes={onSort:r.func,sort:r.string,sortOptions:r.array};function is({query:t,results:s,onSearch:o,hrefItem:i,loading:n}){const a=Ae(),d=l=>{a.push(i(l))},f=l=>{t&&l.key==="Enter"&&d(t)};return e.jsx(_t,{sx:{width:{xs:1,sm:260}},loading:n,autoHighlight:!0,popupIcon:null,options:s,onInputChange:(l,m)=>o(m),getOptionLabel:l=>l.title,noOptionsText:e.jsx(Dt,{query:t,sx:{bgcolor:"unset"}}),isOptionEqualToValue:(l,m)=>l.id===m.id,slotProps:{popper:{placement:"bottom-start",sx:{minWidth:320}},paper:{sx:{[` .${Lt.option}`]:{pl:.75}}}},renderInput:l=>e.jsx(tt,{...l,placeholder:"Search...",onKeyUp:f,InputProps:{...l.InputProps,startAdornment:e.jsx(Pt,{position:"start",children:e.jsx(u,{icon:"eva:search-fill",sx:{ml:1,color:"text.disabled"}})}),endAdornment:e.jsxs(e.Fragment,{children:[n?e.jsx(u,{icon:"svg-spinners:8-dots-rotate",sx:{mr:-3}}):null,l.InputProps.endAdornment]})}}),renderOption:(l,m,{inputValue:c})=>{const w=It(m.title,c),y=Ft(m.title,w);return h.createElement("li",{...l,key:m.id},e.jsx(B,{alt:m.title,src:m.coverUrl,variant:"rounded",sx:{width:48,height:48,flexShrink:0,mr:1.5,borderRadius:1}},m.id),e.jsx(Ue,{underline:"none",onClick:()=>d(m.title),children:y.map((T,b)=>e.jsx(g,{component:"span",color:T.highlight?"primary":"textPrimary",sx:{typography:"body2",fontWeight:T.highlight?"fontWeightSemiBold":"fontWeightMedium"},children:T.text},b))},c))}})}is.propTypes={hrefItem:r.func,loading:r.bool,onSearch:r.func,query:r.string,results:r.array};function Me({variant:t="vertical",sx:s,...o}){const i=Y("up","sm");return t==="horizontal"?e.jsxs(p,{component:Ge,direction:"row",variant:"outlined",sx:{borderRadius:2,...s},...o,children:[e.jsxs(p,{spacing:2,flexGrow:1,sx:{p:3},children:[e.jsxs(p,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(C,{variant:"circular",sx:{width:40,height:40}}),e.jsx(C,{sx:{width:24,height:12}})]}),e.jsx(C,{sx:{width:1,height:10}}),e.jsx(C,{sx:{width:"calc(100% - 40px)",height:10}}),e.jsx(C,{sx:{width:"calc(100% - 80px)",height:10}})]}),i&&e.jsx(p,{sx:{p:1},children:e.jsx(C,{sx:{width:170,height:240,flexShrink:0}})})]}):e.jsxs(p,{component:Ge,variant:"outlined",sx:{borderRadius:2,...s},...o,children:[e.jsx(p,{sx:{p:1},children:e.jsx(C,{sx:{paddingTop:"100%"}})}),e.jsxs(p,{spacing:2,direction:"row",alignItems:"center",sx:{p:3,pt:2},children:[e.jsx(C,{variant:"circular",sx:{width:40,height:40,flexShrink:0}}),e.jsxs(p,{flexGrow:1,spacing:1,children:[e.jsx(C,{sx:{height:10}}),e.jsx(C,{sx:{width:.5,height:10}})]})]})]})}Me.propTypes={sx:r.object,variant:r.string};function pt({...t}){return e.jsxs(p,{...t,children:[e.jsx(C,{variant:"rectangular",sx:{height:480}}),e.jsxs(p,{sx:{width:1,maxWidth:720,mx:"auto"},children:[e.jsxs(p,{spacing:1,sx:{my:8},children:[e.jsx(C,{height:10}),e.jsx(C,{height:10,sx:{width:.9}}),e.jsx(C,{height:10,sx:{width:.8}})]}),e.jsx(C,{sx:{height:720}})]})]})}function mt({post:t}){const s=Ie(),o=Ae(),i=Y("up","sm"),{title:n,author:a,publish:d,coverUrl:f,createdAt:l,totalViews:m,totalShares:c,totalComments:w,description:y}=t;return e.jsxs(e.Fragment,{children:[e.jsxs(p,{component:oe,direction:"row",children:[e.jsxs(p,{sx:{p:T=>T.spacing(3,3,2,3)},children:[e.jsxs(p,{direction:"row",alignItems:"center",justifyContent:"space-between",sx:{mb:2},children:[e.jsx(At,{variant:"soft",color:d==="published"&&"info"||"default",children:d}),e.jsx(A,{component:"span",sx:{typography:"caption",color:"text.disabled"},children:ue(l)})]}),e.jsxs(p,{spacing:1,flexGrow:1,children:[e.jsx(Ue,{color:"inherit",component:_,href:D.dashboard.post.details(n),children:e.jsx(De,{variant:"subtitle2",line:2,children:n})}),e.jsx(De,{variant:"body2",sx:{color:"text.secondary"},children:y})]}),e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsx(Z,{color:s.open?"inherit":"default",onClick:s.onOpen,children:e.jsx(u,{icon:"eva:more-horizontal-fill"})}),e.jsxs(p,{spacing:1.5,flexGrow:1,direction:"row",flexWrap:"wrap",justifyContent:"flex-end",sx:{typography:"caption",color:"text.disabled"},children:[e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsx(u,{icon:"eva:message-circle-fill",width:16,sx:{mr:.5}}),V(w)]}),e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsx(u,{icon:"solar:eye-bold",width:16,sx:{mr:.5}}),V(m)]}),e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsx(u,{icon:"solar:share-bold",width:16,sx:{mr:.5}}),V(c)]})]})]})]}),i&&e.jsxs(A,{sx:{width:180,height:240,position:"relative",flexShrink:0,p:1},children:[e.jsx(B,{alt:a.name,src:a.avatarUrl,sx:{position:"absolute",top:16,right:16,zIndex:9}}),e.jsx(ke,{alt:n,src:f,sx:{height:1,borderRadius:1.5}})]})]}),e.jsxs(Fe,{open:s.open,onClose:s.onClose,arrow:"bottom-center",sx:{width:140},children:[e.jsxs(se,{onClick:()=>{s.onClose(),o.push(D.dashboard.post.details(n))},children:[e.jsx(u,{icon:"solar:eye-bold"}),"View"]}),e.jsxs(se,{onClick:()=>{s.onClose(),o.push(D.dashboard.post.edit(n))},children:[e.jsx(u,{icon:"solar:pen-bold"}),"Edit"]}),e.jsxs(se,{onClick:()=>{s.onClose()},sx:{color:"error.main"},children:[e.jsx(u,{icon:"solar:trash-bin-trash-bold"}),"Delete"]})]})]})}mt.propTypes={post:r.shape({author:r.object,coverUrl:r.string,createdAt:r.oneOfType([r.string,r.instanceOf(Date)]),description:r.string,publish:r.string,title:r.string,totalComments:r.number,totalShares:r.number,totalViews:r.number})};function ns({posts:t,loading:s}){const o=e.jsx(e.Fragment,{children:[...Array(16)].map((n,a)=>e.jsx(Me,{variant:"horizontal"},a))}),i=e.jsx(e.Fragment,{children:t.map(n=>e.jsx(mt,{post:n},n.id))});return e.jsxs(e.Fragment,{children:[e.jsx(A,{gap:3,display:"grid",gridTemplateColumns:{xs:"repeat(1, 1fr)",md:"repeat(2, 1fr)"},children:s?o:i}),t.length>8&&e.jsx(st,{count:8,sx:{mt:8,[`& .${Ht.ul}`]:{justifyContent:"center"}}})]})}ns.propTypes={loading:r.bool,posts:r.array};function rs(t){return Je("MuiSpeedDial",t)}const as=Ye("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),ae=as,ls=["ref"],cs=["ariaLabel","FabProps","children","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"],ds=["ref"],ps=t=>{const{classes:s,open:o,direction:i}=t,n={root:["root",`direction${fe(i)}`],fab:["fab"],actions:["actions",!o&&"actionsClosed"]};return Xe(n,rs,s)};function ee(t){if(t==="up"||t==="down")return"vertical";if(t==="right"||t==="left")return"horizontal"}function ms(t,s,o){return t<s?s:t>o?o:t}const O=32,le=16,xs=J("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(t,s)=>{const{ownerState:o}=t;return[s.root,s[`direction${fe(o.direction)}`]]}})(({theme:t,ownerState:s})=>S({zIndex:(t.vars||t).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},s.direction==="up"&&{flexDirection:"column-reverse",[`& .${ae.actions}`]:{flexDirection:"column-reverse",marginBottom:-O,paddingBottom:le+O}},s.direction==="down"&&{flexDirection:"column",[`& .${ae.actions}`]:{flexDirection:"column",marginTop:-O,paddingTop:le+O}},s.direction==="left"&&{flexDirection:"row-reverse",[`& .${ae.actions}`]:{flexDirection:"row-reverse",marginRight:-O,paddingRight:le+O}},s.direction==="right"&&{flexDirection:"row",[`& .${ae.actions}`]:{flexDirection:"row",marginLeft:-O,paddingLeft:le+O}})),hs=J(dt,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(t,s)=>s.fab})(()=>({pointerEvents:"auto"})),us=J("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(t,s)=>{const{ownerState:o}=t;return[s.actions,!o.open&&s.actionsClosed]}})(({ownerState:t})=>S({display:"flex",pointerEvents:"auto"},!t.open&&{transition:"top 0s linear 0.2s",pointerEvents:"none"})),fs=h.forwardRef(function(s,o){const i=Qe({props:s,name:"MuiSpeedDial"}),n=Re(),a={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{ariaLabel:d,FabProps:{ref:f}={},children:l,className:m,direction:c="up",hidden:w=!1,icon:y,onBlur:T,onClose:b,onFocus:P,onKeyDown:R,onMouseEnter:N,onMouseLeave:E,onOpen:$,open:Q,TransitionComponent:G=es,transitionDuration:j=a,TransitionProps:v}=i,L=ce(i.FabProps,ls),X=ce(i,cs),[I,H]=Ut({controlled:Q,default:!1,name:"SpeedDial",state:"open"}),ie=S({},i,{open:I,direction:c}),ne=ps(ie),K=h.useRef();h.useEffect(()=>()=>{clearTimeout(K.current)},[]);const ve=h.useRef(0),we=h.useRef(),q=h.useRef([]);q.current=[q.current[0]];const bt=h.useCallback(x=>{q.current[0]=x},[]),vt=Rt(f,bt),wt=(x,k)=>U=>{q.current[x+1]=U,k&&k(U)},yt=x=>{R&&R(x);const k=x.key.replace("Arrow","").toLowerCase(),{current:U=k}=we;if(x.key==="Escape"){H(!1),q.current[0].focus(),b&&b(x,"escapeKeyDown");return}if(ee(k)===ee(U)&&ee(k)!==void 0){x.preventDefault();const Ce=k===U?1:-1,re=ms(ve.current+Ce,0,q.current.length-1);q.current[re].focus(),ve.current=re,we.current=U}};h.useEffect(()=>{I||(ve.current=0,we.current=void 0)},[I]);const Be=x=>{x.type==="mouseleave"&&E&&E(x),x.type==="blur"&&T&&T(x),clearTimeout(K.current),x.type==="blur"?K.current=setTimeout(()=>{H(!1),b&&b(x,"blur")}):(H(!1),b&&b(x,"mouseLeave"))},Ct=x=>{L.onClick&&L.onClick(x),clearTimeout(K.current),I?(H(!1),b&&b(x,"toggle")):(H(!0),$&&$(x,"toggle"))},We=x=>{x.type==="mouseenter"&&N&&N(x),x.type==="focus"&&P&&P(x),clearTimeout(K.current),I||(K.current=setTimeout(()=>{H(!0),$&&$(x,{focus:"focus",mouseenter:"mouseEnter"}[x.type])}))},ye=d.replace(/^[^a-z]+|[^\w:.-]+/gi,""),Ne=h.Children.toArray(l).filter(x=>h.isValidElement(x)),St=Ne.map((x,k)=>{const U=x.props,{FabProps:{ref:Ce}={},tooltipPlacement:re}=U,Tt=ce(U.FabProps,ds),kt=re||(ee(c)==="vertical"?"left":"top");return h.cloneElement(x,{FabProps:S({},Tt,{ref:wt(k,Ce)}),delay:30*(I?k:Ne.length-k),open:I,tooltipPlacement:kt,id:`${ye}-action-${k}`})});return e.jsxs(xs,S({className:de(ne.root,m),ref:o,role:"presentation",onKeyDown:yt,onBlur:Be,onFocus:We,onMouseEnter:We,onMouseLeave:Be,ownerState:ie},X,{children:[e.jsx(G,S({in:!w,timeout:j,unmountOnExit:!0},v,{children:e.jsx(hs,S({color:"primary","aria-label":d,"aria-haspopup":"true","aria-expanded":I,"aria-controls":`${ye}-actions`},L,{onClick:Ct,className:de(ne.fab,L.className),ref:vt,ownerState:ie,children:h.isValidElement(y)&&Et(y,["SpeedDialIcon"])?h.cloneElement(y,{open:I}):y}))})),e.jsx(us,{id:`${ye}-actions`,role:"menu","aria-orientation":ee(c),className:de(ne.actions,!I&&ne.actionsClosed),ownerState:ie,children:St})]}))}),js=fs;function gs(t){return Je("MuiSpeedDialAction",t)}const bs=Ye("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),vs=bs,ws=["className","delay","FabProps","icon","id","open","TooltipClasses","tooltipOpen","tooltipPlacement","tooltipTitle"],ys=t=>{const{open:s,tooltipPlacement:o,classes:i}=t,n={fab:["fab",!s&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${fe(o)}`,!s&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return Xe(n,gs,i)},Cs=J(dt,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(t,s)=>{const{ownerState:o}=t;return[s.fab,!o.open&&s.fabClosed]}})(({theme:t,ownerState:s})=>S({margin:8,color:(t.vars||t).palette.text.secondary,backgroundColor:(t.vars||t).palette.background.paper,"&:hover":{backgroundColor:t.vars?t.vars.palette.SpeedDialAction.fabHoverBg:$t(t.palette.background.paper,.15)},transition:`${t.transitions.create("transform",{duration:t.transitions.duration.shorter})}, opacity 0.8s`,opacity:1},!s.open&&{opacity:0,transform:"scale(0)"})),Ss=J("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(t,s)=>{const{ownerState:o}=t;return[s.staticTooltip,!o.open&&s.staticTooltipClosed,s[`tooltipPlacement${fe(o.tooltipPlacement)}`]]}})(({theme:t,ownerState:s})=>({position:"relative",display:"flex",alignItems:"center",[`& .${vs.staticTooltipLabel}`]:S({transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.shorter}),opacity:1},!s.open&&{opacity:0,transform:"scale(0.5)"},s.tooltipPlacement==="left"&&{transformOrigin:"100% 50%",right:"100%",marginRight:8},s.tooltipPlacement==="right"&&{transformOrigin:"0% 50%",left:"100%",marginLeft:8})})),Ts=J("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(t,s)=>s.staticTooltipLabel})(({theme:t})=>S({position:"absolute"},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.paper,borderRadius:(t.vars||t).shape.borderRadius,boxShadow:(t.vars||t).shadows[1],color:(t.vars||t).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"})),ks=h.forwardRef(function(s,o){const i=Qe({props:s,name:"MuiSpeedDialAction"}),{className:n,delay:a=0,FabProps:d={},icon:f,id:l,open:m,TooltipClasses:c,tooltipOpen:w=!1,tooltipPlacement:y="left",tooltipTitle:T}=i,b=ce(i,ws),P=S({},i,{tooltipPlacement:y}),R=ys(P),[N,E]=h.useState(w),$=()=>{E(!1)},Q=()=>{E(!0)},G={transitionDelay:`${a}ms`},j=e.jsx(Cs,S({size:"small",className:de(R.fab,n),tabIndex:-1,role:"menuitem",ownerState:P},d,{style:S({},G,d.style),children:f}));return w?e.jsxs(Ss,S({id:l,ref:o,className:R.staticTooltip,ownerState:P},b,{children:[e.jsx(Ts,{style:G,id:`${l}-label`,className:R.staticTooltipLabel,ownerState:P,children:T}),h.cloneElement(j,{"aria-labelledby":`${l}-label`})]})):(!m&&N&&E(!1),e.jsx(Se,S({id:l,ref:o,title:T,placement:y,onClose:$,onOpen:Q,open:m&&N,classes:c},b,{children:j})))}),Ds=ks;function be({title:t,author:s,coverUrl:o,createdAt:i}){const n=Re(),a=Y("up","sm");return e.jsx(A,{sx:{height:480,overflow:"hidden",...Ot({imgUrl:o,startColor:`${Te(n.palette.grey[900],.64)} 0%`,endColor:`${Te(n.palette.grey[900],.64)} 100%`})},children:e.jsxs(M,{sx:{height:1,position:"relative"},children:[e.jsx(g,{variant:"h3",component:"h1",sx:{zIndex:9,color:"common.white",position:"absolute",maxWidth:480,pt:{xs:2,md:8}},children:t}),e.jsxs(p,{sx:{left:0,width:1,bottom:0,position:"absolute"},children:[s&&i&&e.jsxs(p,{direction:"row",alignItems:"center",sx:{px:{xs:2,md:3},pb:{xs:3,md:8}},children:[e.jsx(B,{alt:s.name,src:s.avatarUrl,sx:{width:64,height:64,mr:2}}),e.jsx(zt,{sx:{color:"common.white"},primary:s.name,secondary:ue(i),primaryTypographyProps:{typography:"subtitle1",mb:.5},secondaryTypographyProps:{color:"inherit",sx:{opacity:.64}}})]}),e.jsx(js,{direction:a?"left":"up",ariaLabel:"Share post",icon:e.jsx(u,{icon:"solar:share-bold"}),FabProps:{size:"medium"},sx:{position:"absolute",bottom:{xs:32,md:64},right:{xs:16,md:24}},children:Mt.map(d=>e.jsx(Ds,{icon:e.jsx(u,{icon:d.icon,sx:{color:d.color}}),tooltipTitle:d.name,tooltipPlacement:"top",FabProps:{color:"default"}},d.name))})]})]})})}be.propTypes={author:r.object,coverUrl:r.string,createdAt:r.string,title:r.string};function xt({title:t,coverUrl:s,content:o,description:i,open:n,isValid:a,onClose:d,onSubmit:f,isSubmitting:l}){const m=t||i||o||s,c=t||s;return e.jsxs(Vt,{fullScreen:!0,open:n,onClose:d,children:[e.jsxs(Jt,{sx:{py:2,px:3},children:[e.jsx(g,{variant:"h6",sx:{flexGrow:1},children:"Preview"}),e.jsx(W,{variant:"outlined",color:"inherit",onClick:d,children:"Cancel"}),e.jsx(je,{type:"submit",variant:"contained",disabled:!a,loading:l,onClick:f,children:"Post"})]}),e.jsx(Ee,{}),m?e.jsxs(Bt,{children:[c&&e.jsx(be,{title:t,coverUrl:s}),e.jsx(M,{sx:{mt:5,mb:10},children:e.jsxs(p,{sx:{maxWidth:720,mx:"auto"},children:[e.jsx(g,{variant:"h6",sx:{mb:5},children:i}),e.jsx($e,{children:o})]})})]}):e.jsx(Oe,{filled:!0,title:"Empty Content!"})]})}xt.propTypes={content:r.string,coverUrl:r.string,description:r.string,isSubmitting:r.bool,isValid:r.bool,onClose:r.func,onSubmit:r.func,open:r.bool,title:r.string};function ht({currentPost:t}){var G;const s=Ae(),o=Y("up","md"),{enqueueSnackbar:i}=Wt(),n=et(),a=it().shape({title:z().required("Title is required"),description:z().required("Description is required"),content:z().required("Content is required"),coverUrl:Kt().nullable().required("Cover is required"),tags:_e().min(2,"Must have at least 2 tags"),metaKeywords:_e().min(1,"Meta keywords is required"),metaTitle:z(),metaDescription:z()}),d=h.useMemo(()=>({title:(t==null?void 0:t.title)||"",description:(t==null?void 0:t.description)||"",content:(t==null?void 0:t.content)||"",coverUrl:(t==null?void 0:t.coverUrl)||null,tags:(t==null?void 0:t.tags)||[],metaKeywords:(t==null?void 0:t.metaKeywords)||[],metaTitle:(t==null?void 0:t.metaTitle)||"",metaDescription:(t==null?void 0:t.metaDescription)||""}),[t]),f=nt({resolver:at(a),defaultValues:d}),{reset:l,watch:m,setValue:c,handleSubmit:w,formState:{isSubmitting:y,isValid:T}}=f,b=m();h.useEffect(()=>{t&&l(d)},[t,d,l]);const P=w(async j=>{try{await new Promise(v=>setTimeout(v,500)),l(),n.onFalse(),i(t?"Update success!":"Create success!"),s.push(D.dashboard.post.root),console.info("DATA",j)}catch(v){console.error(v)}}),R=h.useCallback(j=>{const v=j[0],L=Object.assign(v,{preview:URL.createObjectURL(v)});v&&c("coverUrl",L,{shouldValidate:!0})},[c]),N=h.useCallback(()=>{c("coverUrl",null)},[c]),E=e.jsxs(e.Fragment,{children:[o&&e.jsxs(F,{md:4,children:[e.jsx(g,{variant:"h6",sx:{mb:.5},children:"Details"}),e.jsx(g,{variant:"body2",sx:{color:"text.secondary"},children:"Title, short description, image..."})]}),e.jsx(F,{xs:12,md:8,children:e.jsxs(oe,{children:[!o&&e.jsx(Ze,{title:"Details"}),e.jsxs(p,{spacing:3,sx:{p:3},children:[e.jsx(te,{name:"title",label:"Post Title"}),e.jsx(te,{name:"description",label:"Description",multiline:!0,rows:3}),e.jsxs(p,{spacing:1.5,children:[e.jsx(g,{variant:"subtitle2",children:"Content"}),e.jsx(Zt,{simple:!0,name:"content"})]}),e.jsxs(p,{spacing:1.5,children:[e.jsx(g,{variant:"subtitle2",children:"Cover"}),e.jsx(Yt,{name:"coverUrl",maxSize:3145728,onDrop:R,onDelete:N})]})]})]})})]}),$=e.jsxs(e.Fragment,{children:[o&&e.jsxs(F,{md:4,children:[e.jsx(g,{variant:"h6",sx:{mb:.5},children:"Properties"}),e.jsx(g,{variant:"body2",sx:{color:"text.secondary"},children:"Additional functions and attributes..."})]}),e.jsx(F,{xs:12,md:8,children:e.jsxs(oe,{children:[!o&&e.jsx(Ze,{title:"Properties"}),e.jsxs(p,{spacing:3,sx:{p:3},children:[e.jsx(He,{name:"tags",label:"Tags",placeholder:"+ Tags",multiple:!0,freeSolo:!0,options:qe.map(j=>j),getOptionLabel:j=>j,renderOption:(j,v)=>h.createElement("li",{...j,key:v},v),renderTags:(j,v)=>j.map((L,X)=>h.createElement(me,{...v({index:X}),key:L,label:L,size:"small",color:"info",variant:"soft"}))}),e.jsx(te,{name:"metaTitle",label:"Meta title"}),e.jsx(te,{name:"metaDescription",label:"Meta description",fullWidth:!0,multiline:!0,rows:3}),e.jsx(He,{name:"metaKeywords",label:"Meta keywords",placeholder:"+ Keywords",multiple:!0,freeSolo:!0,disableCloseOnSelect:!0,options:qe.map(j=>j),getOptionLabel:j=>j,renderOption:(j,v)=>h.createElement("li",{...j,key:v},v),renderTags:(j,v)=>j.map((L,X)=>h.createElement(me,{...v({index:X}),key:L,label:L,size:"small",color:"info",variant:"soft"}))}),e.jsx(pe,{control:e.jsx(Ke,{defaultChecked:!0}),label:"Enable comments"})]})]})})]}),Q=e.jsxs(e.Fragment,{children:[o&&e.jsx(F,{md:4}),e.jsxs(F,{xs:12,md:8,sx:{display:"flex",alignItems:"center"},children:[e.jsx(pe,{control:e.jsx(Ke,{defaultChecked:!0}),label:"Publish",sx:{flexGrow:1,pl:3}}),e.jsx(W,{color:"inherit",variant:"outlined",size:"large",onClick:n.onTrue,children:"Preview"}),e.jsx(je,{type:"submit",variant:"contained",size:"large",loading:y,sx:{ml:2},children:t?"Save Changes":"Create Post"})]})]});return e.jsxs(rt,{methods:f,onSubmit:P,children:[e.jsxs(F,{container:!0,spacing:3,children:[E,$,Q]}),e.jsx(xt,{title:b.title,content:b.content,description:b.description,coverUrl:typeof b.coverUrl=="string"?b.coverUrl:`${(G=b.coverUrl)==null?void 0:G.preview}`,open:n.value,isValid:T,isSubmitting:y,onClose:n.onFalse,onSubmit:P})]})}ht.propTypes={currentPost:r.object};function Ls({title:t}){const s=Nt(),{post:o}=ze(`${t}`);return e.jsxs(M,{maxWidth:s.themeStretch?!1:"lg",children:[e.jsx(ot,{heading:"Edit",links:[{name:"Dashboard",href:D.dashboard.root},{name:"Blog",href:D.dashboard.post.root},{name:o==null?void 0:o.title}],sx:{mb:{xs:3,md:5}}}),e.jsx(ht,{currentPost:o})]})}Ls.propTypes={title:r.string};function Le({name:t,avatarUrl:s,message:o,tagUser:i,postedAt:n,hasReply:a}){const d=et();return e.jsxs(Xt,{sx:{p:0,pt:3,alignItems:"flex-start",...a&&{pl:8}},children:[e.jsx(B,{alt:t,src:s,sx:{mr:2,width:48,height:48}}),e.jsxs(p,{flexGrow:1,sx:{pb:3,borderBottom:f=>`solid 1px ${f.palette.divider}`},children:[e.jsx(g,{variant:"subtitle2",sx:{mb:.5},children:t}),e.jsx(g,{variant:"caption",sx:{color:"text.disabled"},children:ue(n)}),e.jsxs(g,{variant:"body2",sx:{mt:1},children:[i&&e.jsxs(A,{component:"strong",sx:{mr:.5},children:["@",i]}),o]}),d.value&&e.jsx(A,{sx:{mt:2},children:e.jsx(tt,{fullWidth:!0,autoFocus:!0,placeholder:"Write comment..."})})]}),!a&&e.jsx(W,{size:"small",color:d.value?"primary":"inherit",startIcon:e.jsx(u,{icon:"solar:pen-bold",width:16}),onClick:d.onToggle,sx:{right:0,position:"absolute"},children:"Reply"})]})}Le.propTypes={avatarUrl:r.string,hasReply:r.bool,message:r.string,name:r.string,postedAt:r.string,tagUser:r.string};function Ve({comments:t}){return e.jsxs(e.Fragment,{children:[e.jsx(e.Fragment,{children:t.map(s=>{const{id:o,replyComment:i,name:n,users:a,message:d,avatarUrl:f,postedAt:l}=s,m=!!i.length;return e.jsxs(A,{children:[e.jsx(Le,{name:n,message:d,postedAt:l,avatarUrl:f}),m&&i.map(c=>{const w=a.find(y=>y.id===c.userId);return e.jsx(Le,{name:(w==null?void 0:w.name)||"",message:c.message,postedAt:c.postedAt,avatarUrl:(w==null?void 0:w.avatarUrl)||"",tagUser:c.tagUser,hasReply:!0},c.id)})]},o)})}),e.jsx(st,{count:8,sx:{my:5,mx:"auto"}})]})}Ve.propTypes={comments:r.array};function ut(){const t=it().shape({comment:z().required("Comment is required"),name:z().required("Name is required"),email:z().required("Email is required").email("Email must be a valid email address")}),s={comment:"",name:"",email:""},o=nt({resolver:at(t),defaultValues:s}),{reset:i,handleSubmit:n,formState:{isSubmitting:a}}=o,d=n(async f=>{try{await new Promise(l=>setTimeout(l,500)),i(),console.info("DATA",f)}catch(l){console.error(l)}});return e.jsx(rt,{methods:o,onSubmit:d,children:e.jsxs(p,{spacing:3,children:[e.jsx(te,{name:"comment",placeholder:"Write some of your comments...",multiline:!0,rows:4}),e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsxs(p,{direction:"row",alignItems:"center",flexGrow:1,children:[e.jsx(Z,{children:e.jsx(u,{icon:"solar:gallery-add-bold"})}),e.jsx(Z,{children:e.jsx(u,{icon:"eva:attach-2-fill"})}),e.jsx(Z,{children:e.jsx(u,{icon:"eva:smiling-face-fill"})})]}),e.jsx(je,{type:"submit",variant:"contained",loading:a,children:"Post comment"})]})]})})}function ft({publish:t,backLink:s,editLink:o,liveLink:i,publishOptions:n,onChangePublish:a,sx:d,...f}){const l=Ie();return e.jsxs(e.Fragment,{children:[e.jsxs(p,{spacing:1.5,direction:"row",sx:{mb:{xs:3,md:5},...d},...f,children:[e.jsx(W,{component:_,href:s,startIcon:e.jsx(u,{icon:"eva:arrow-ios-back-fill",width:16}),children:"Back"}),e.jsx(A,{sx:{flexGrow:1}}),t==="published"&&e.jsx(Se,{title:"Go Live",children:e.jsx(Z,{component:_,href:i,children:e.jsx(u,{icon:"eva:external-link-fill"})})}),e.jsx(Se,{title:"Edit",children:e.jsx(Z,{component:_,href:o,children:e.jsx(u,{icon:"solar:pen-bold"})})}),e.jsx(je,{color:"inherit",variant:"contained",loading:!t,loadingIndicator:"Loading…",endIcon:e.jsx(u,{icon:"eva:arrow-ios-downward-fill"}),onClick:l.onOpen,sx:{textTransform:"capitalize"},children:t})]}),e.jsx(Fe,{open:l.open,onClose:l.onClose,arrow:"top-right",sx:{width:140},children:n.map(m=>e.jsxs(se,{selected:m.value===t,onClick:()=>{l.onClose(),a(m.value)},children:[m.value==="published"&&e.jsx(u,{icon:"eva:cloud-upload-fill"}),m.value==="draft"&&e.jsx(u,{icon:"solar:file-text-bold"}),m.label]},m.value))})]})}ft.propTypes={backLink:r.string,editLink:r.string,liveLink:r.string,onChangePublish:r.func,publish:r.string,publishOptions:r.array,sx:r.object};function Ps({title:t}){const[s,o]=h.useState(""),{post:i,postLoading:n,postError:a}=ze(t),d=h.useCallback(c=>{o(c)},[]);h.useEffect(()=>{i&&o(i==null?void 0:i.publish)},[i]);const f=e.jsx(pt,{}),l=e.jsx(Oe,{filled:!0,title:`${a==null?void 0:a.message}`,action:e.jsx(W,{component:_,href:D.dashboard.post.root,startIcon:e.jsx(u,{icon:"eva:arrow-ios-back-fill",width:16}),sx:{mt:3},children:"Back to List"}),sx:{py:20}}),m=i&&e.jsxs(e.Fragment,{children:[e.jsx(ft,{backLink:D.dashboard.post.root,editLink:D.dashboard.post.edit(`${i==null?void 0:i.title}`),liveLink:D.post.details(`${i==null?void 0:i.title}`),publish:s||"",onChangePublish:d,publishOptions:ts}),e.jsx(be,{title:i.title,coverUrl:i.coverUrl}),e.jsxs(p,{sx:{maxWidth:720,mx:"auto",mt:{xs:5,md:10}},children:[e.jsx(g,{variant:"subtitle1",sx:{mb:5},children:i.description}),e.jsx($e,{children:i.content}),e.jsxs(p,{spacing:3,sx:{py:3,borderTop:c=>`dashed 1px ${c.palette.divider}`,borderBottom:c=>`dashed 1px ${c.palette.divider}`},children:[e.jsx(p,{direction:"row",flexWrap:"wrap",spacing:1,children:i.tags.map(c=>e.jsx(me,{label:c,variant:"soft"},c))}),e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsx(pe,{control:e.jsx(lt,{defaultChecked:!0,size:"small",color:"error",icon:e.jsx(u,{icon:"solar:heart-bold"}),checkedIcon:e.jsx(u,{icon:"solar:heart-bold"})}),label:V(i.totalFavorites),sx:{mr:1}}),e.jsx(ct,{sx:{[`& .${Gt.avatar}`]:{width:32,height:32}},children:i.favoritePerson.map(c=>e.jsx(B,{alt:c.name,src:c.avatarUrl},c.name))})]})]}),e.jsxs(p,{direction:"row",sx:{mb:3,mt:5},children:[e.jsx(g,{variant:"h4",children:"Comments"}),e.jsxs(g,{variant:"subtitle2",sx:{color:"text.disabled"},children:["(",i.comments.length,")"]})]}),e.jsx(ut,{}),e.jsx(Ee,{sx:{mt:5,mb:2}}),e.jsx(Ve,{comments:i.comments})]})]});return e.jsxs(M,{maxWidth:!1,children:[n&&f,a&&l,i&&m]})}Ps.propTypes={title:r.string};function jt({post:t,index:s}){const o=Re(),i=Y("up","md"),{coverUrl:n,title:a,totalViews:d,totalComments:f,totalShares:l,author:m,createdAt:c}=t;return i&&(s===0||s===1||s===2)?e.jsxs(oe,{children:[e.jsx(B,{alt:m.name,src:m.avatarUrl,sx:{top:24,left:24,zIndex:9,position:"absolute"}}),e.jsx(Pe,{title:a,createdAt:c,totalViews:d,totalShares:l,totalComments:f,index:s}),e.jsx(ke,{alt:a,src:n,overlay:Te(o.palette.grey[900],.48),sx:{width:1,height:360}})]}):e.jsxs(oe,{children:[e.jsxs(A,{sx:{position:"relative"},children:[e.jsx(qt,{sx:{left:0,zIndex:9,width:88,height:36,bottom:-16,position:"absolute"}}),e.jsx(B,{alt:m.name,src:m.avatarUrl,sx:{left:24,zIndex:9,bottom:-24,position:"absolute"}}),e.jsx(ke,{alt:a,src:n,ratio:"4/3"})]}),e.jsx(Pe,{title:a,totalViews:d,totalComments:f,totalShares:l,createdAt:c})]})}jt.propTypes={index:r.number,post:r.object};function Pe({title:t,createdAt:s,totalViews:o,totalShares:i,totalComments:n,index:a}){const d=Y("up","md"),f=D.post.details(t),l=a===0,m=a===1||a===2;return e.jsxs(Qt,{sx:{pt:6,width:1,...(l||m)&&{pt:0,zIndex:9,bottom:0,position:"absolute",color:"common.white"}},children:[e.jsx(g,{variant:"caption",component:"div",sx:{mb:1,color:"text.disabled",...(l||m)&&{opacity:.64,color:"common.white"}},children:ue(s)}),e.jsx(Ue,{color:"inherit",component:_,href:f,children:e.jsx(De,{variant:d&&l?"h5":"subtitle2",line:2,persistent:!0,children:t})}),e.jsxs(p,{spacing:1.5,direction:"row",justifyContent:"flex-end",sx:{mt:3,typography:"caption",color:"text.disabled",...(l||m)&&{opacity:.64,color:"common.white"}},children:[e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsx(u,{icon:"eva:message-circle-fill",width:16,sx:{mr:.5}}),V(n)]}),e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsx(u,{icon:"solar:eye-bold",width:16,sx:{mr:.5}}),V(o)]}),e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsx(u,{icon:"solar:share-bold",width:16,sx:{mr:.5}}),V(i)]})]})]})}Pe.propTypes={createdAt:r.string,index:r.number,title:r.string,totalComments:r.number,totalShares:r.number,totalViews:r.number};function gt({posts:t,loading:s,disabledIndex:o}){const i=e.jsx(e.Fragment,{children:[...Array(16)].map((a,d)=>e.jsx(F,{xs:12,sm:6,md:3,children:e.jsx(Me,{})},d))}),n=e.jsx(e.Fragment,{children:t.map((a,d)=>e.jsx(F,{xs:12,sm:6,md:!o&&d===0?6:3,children:e.jsx(jt,{post:a,index:o?void 0:d})},a.id))});return e.jsxs(e.Fragment,{children:[e.jsx(F,{container:!0,spacing:3,children:s?i:n}),t.length>8&&e.jsx(p,{alignItems:"center",sx:{mt:8,mb:{xs:10,md:15}},children:e.jsx(W,{size:"large",variant:"outlined",startIcon:e.jsx(u,{icon:"svg-spinners:12-dots-scale-rotate",width:24}),children:"Load More"})})]})}gt.propTypes={disabledIndex:r.bool,loading:r.bool,posts:r.array};function Is({title:t}){const{post:s,postError:o,postLoading:i}=ze(t),{latestPosts:n,latestPostsLoading:a}=ss(t),d=e.jsx(pt,{}),f=e.jsx(M,{sx:{my:10},children:e.jsx(Oe,{filled:!0,title:`${o==null?void 0:o.message}`,action:e.jsx(W,{component:_,href:D.post.root,startIcon:e.jsx(u,{icon:"eva:arrow-ios-back-fill",width:16}),sx:{mt:3},children:"Back to List"}),sx:{py:10}})}),l=s&&e.jsxs(e.Fragment,{children:[e.jsx(be,{title:s.title,author:s.author,coverUrl:s.coverUrl,createdAt:s.createdAt}),e.jsx(M,{maxWidth:!1,sx:{py:3,mb:5,borderBottom:c=>`solid 1px ${c.palette.divider}`},children:e.jsx(ot,{links:[{name:"Home",href:"/"},{name:"Blog",href:D.post.root},{name:s==null?void 0:s.title}],sx:{maxWidth:720,mx:"auto"}})}),e.jsx(M,{maxWidth:!1,children:e.jsxs(p,{sx:{maxWidth:720,mx:"auto"},children:[e.jsx(g,{variant:"subtitle1",sx:{mb:5},children:s.description}),e.jsx($e,{children:s.content}),e.jsxs(p,{spacing:3,sx:{py:3,borderTop:c=>`dashed 1px ${c.palette.divider}`,borderBottom:c=>`dashed 1px ${c.palette.divider}`},children:[e.jsx(p,{direction:"row",flexWrap:"wrap",spacing:1,children:s.tags.map(c=>e.jsx(me,{label:c,variant:"soft"},c))}),e.jsxs(p,{direction:"row",alignItems:"center",children:[e.jsx(pe,{control:e.jsx(lt,{defaultChecked:!0,size:"small",color:"error",icon:e.jsx(u,{icon:"solar:heart-bold"}),checkedIcon:e.jsx(u,{icon:"solar:heart-bold"})}),label:V(s.totalFavorites),sx:{mr:1}}),e.jsx(ct,{children:s.favoritePerson.map(c=>e.jsx(B,{alt:c.name,src:c.avatarUrl},c.name))})]})]}),e.jsxs(p,{direction:"row",sx:{mb:3,mt:5},children:[e.jsx(g,{variant:"h4",children:"Comments"}),e.jsxs(g,{variant:"subtitle2",sx:{color:"text.disabled"},children:["(",s.comments.length,")"]})]}),e.jsx(ut,{}),e.jsx(Ee,{sx:{mt:5,mb:2}}),e.jsx(Ve,{comments:s.comments})]})})]}),m=e.jsxs(e.Fragment,{children:[e.jsx(g,{variant:"h4",sx:{mb:5},children:"Recent Posts"}),e.jsx(gt,{posts:n.slice(n.length-4),loading:a,disabledIndex:!0})]});return e.jsxs(e.Fragment,{children:[i&&d,o&&f,s&&l,e.jsx(M,{sx:{pb:15},children:!!n.length&&m})]})}Is.propTypes={title:r.string};export{is as P,no as a,os as b,oo as c,gt as d,Is as e,ns as f,Ps as g,ht as h,Ls as i,io as u};
